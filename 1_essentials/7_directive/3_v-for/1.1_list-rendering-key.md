# 1. key lÃ  gÃ¬? (Hiá»ƒu Ä‘Ãºng báº£n cháº¥t)

Trong `v-for`, key lÃ  Ä‘á»‹nh danh duy nháº¥t giÃºp Vue biáº¿t:

ğŸ‘‰ Pháº§n tá»­ DOM / component nÃ y tÆ°Æ¡ng á»©ng vá»›i item dá»¯ liá»‡u nÃ o

```html
<div v-for="item in items" :key="item.id">
```

> item.id = danh tÃ­nh

Vue dÃ¹ng key Ä‘á»ƒ:

- So sÃ¡nh trÆ°á»›c & sau khi dá»¯ liá»‡u thay Ä‘á»•i
- Quyáº¿t Ä‘á»‹nh:
  - Giá»¯ láº¡i DOM cÅ©
  - Di chuyá»ƒn DOM
  - Hay táº¡o DOM má»›i

ğŸ‘‰ **KhÃ´ng cÃ³ key = Vue Ä‘oÃ¡n theo index**

# 2. Vue update danh sÃ¡ch nhÆ° tháº¿ nÃ o?

## 2.1 KhÃ´ng dÃ¹ng key (theo index â€“ â€œÄ‘oÃ¡n mÃ²â€)

Danh sÃ¡ch ban Ä‘áº§u:

```js
items = ['A', 'B', 'C']
```

DOM:

```
[0] A
[1] B
[2] C
```

ThÃªm item vÃ o Ä‘áº§u:

```js
items.unshift('X')
```

Vue khÃ´ng biáº¿t ai lÃ  ai, nÃªn:

```
[0] X (DOM cÅ© cá»§a A)
[1] A (DOM cÅ© cá»§a B)
[2] B (DOM cÅ© cá»§a C)
[3] C (DOM má»›i)
```

ğŸ‘‰ DOM bá»‹ tÃ¡i sá»­ dá»¥ng sai

## 2.2 CÃ³ key (theo danh tÃ­nh)

```html
<li v-for="item in items" :key="item">
```

Vue sáº½ hiá»ƒu:

```
X â†’ DOM má»›i
A â†’ DOM cÅ© cá»§a A
B â†’ DOM cÅ© cá»§a B
C â†’ DOM cÅ© cá»§a C
```

ğŸ‘‰ KhÃ´ng bá»‹ lá»‡ch state

# 3. VÃ¬ sao key quan trá»ng vá»›i INPUT & COMPONENT?

## 3.1 VÃ­ dá»¥ lá»—i kinh Ä‘iá»ƒn (input bá»‹ â€œnháº£y dá»¯ liá»‡uâ€)

âŒ KhÃ´ng key:

```html
<li v-for="item in items">
  <input v-model="item.text" />
</li>
```

Khi thÃªm item Ä‘áº§u máº£ng:

- GiÃ¡ trá»‹ input bá»‹ nháº£y sai
- Vue tÃ¡i sá»­ dá»¥ng DOM input cÅ©

## 3.2 ÄÃºng cÃ¡ch (cÃ³ key)

```html
<li v-for="item in items" :key="item.id">
  <input v-model="item.text" />
</li>
```

ğŸ‘‰ Má»—i input gáº¯n vá»›i Ä‘Ãºng item

# 4. key vá»›i COMPONENT (cá»±c ká»³ quan trá»ng)

Component cÃ³:

- state ná»™i bá»™
- lifecycle
- effect

âŒ KhÃ´ng key:

```html
<TodoItem v-for="todo in todos" />
```

Vue cÃ³ thá»ƒ:

- TÃ¡i sá»­ dá»¥ng component sai todo
- `mounted` khÃ´ng cháº¡y láº¡i
- State cÅ© cÃ²n sÃ³t

âœ… ÄÃºng:

```html
<TodoItem
  v-for="todo in todos"
  :key="todo.id"
  :todo="todo"
/>
```

ğŸ‘‰ Component luÃ´n gáº¯n vá»›i Ä‘Ãºng dá»¯ liá»‡u

# 5. VÃ¬ sao KHÃ”NG nÃªn dÃ¹ng index lÃ m key?

âŒ Sai phá»• biáº¿n:

```html
<li v-for="(item, index) in items" :key="index">
```

VÃ¬ sao nguy hiá»ƒm?

Khi:

- thÃªm
- xoÃ¡
- sáº¯p xáº¿p
- filter

ğŸ‘‰ index thay Ä‘á»•i, nhÆ°ng DOM bá»‹ giá»¯ nguyÃªn

VÃ­ dá»¥:

```js
items = ['A', 'B', 'C']
```

XoÃ¡ A:

```js
items = ['B', 'C']
```

Vue nghÄ©:

> index 0 = A â†’ giá» lÃ  B

ğŸ‘‰ DOM cá»§a A bá»‹ gáº¯n cho B

## Khi nÃ o index Táº M cháº¥p nháº­n Ä‘Æ°á»£c?

âœ” Chá»‰ khi:

- Danh sÃ¡ch tÄ©nh
- KhÃ´ng thÃªm / xoÃ¡ / sort
- KhÃ´ng cÃ³ input / component

VÃ­ dá»¥:

```html
<li v-for="(n, i) in 5" :key="i">{{ n }}</li>
```

# 6. key trÃªn template v-for

```html
<template v-for="todo in todos" :key="todo.id">
  <li>{{ todo.name }}</li>
</template>
```

ğŸ“Œ `key` pháº£i Ä‘áº·t trÃªn `<template>`, khÃ´ng Ä‘áº·t bÃªn trong

# 7. Quy táº¯c cá»§a key (ráº¥t quan trá»ng)

`key` pháº£i:

- âœ” Duy nháº¥t
- âœ” á»”n Ä‘á»‹nh (khÃ´ng Ä‘á»•i)
- âœ” Kiá»ƒu nguyÃªn thá»§y (string | number)

âŒ KhÃ´ng dÃ¹ng:

```
:key="item"          // object
:key="Math.random()" // luÃ´n Ä‘á»•i
:key="Date.now()"    // luÃ´n Ä‘á»•i
```

# 8. Vue dÃ¹ng key khi nÃ o?

Vue dÃ¹ng `key` khi:

- diff DOM
- patch component
- quyáº¿t Ä‘á»‹nh:
  - reuse
  - move
  - destroy
  - create

ğŸ‘‰ `key` áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n hiá»‡u nÄƒng + correctness

# 9. Best Practice (chuáº©n cÃ´ng nghiá»‡p)

âœ… LuÃ´n cÃ³ key khi:

- `v-for` + component
- `v-for` + input
- list cÃ³ thÃªm / xoÃ¡ / sort

âœ… Æ¯u tiÃªn:
- id tá»« backend
- uuid

âŒ TrÃ¡nh:
- `:key="index"`
- `:key="object"`
- `:key="random"`

# 10. Ghi nhá»› nhanh (1 cÃ¢u)

ğŸ”‘ `key` khÃ´ng dÃ nh cho Vue â€” mÃ  dÃ nh cho DOM & component state

Náº¿u khÃ´ng cÃ³ `key`, Vue:

- update nhanh hÆ¡n
- nhÆ°ng cÃ³ thá»ƒ sai logic.